---
const env = import.meta.env.DEBUG_GTM_ENV ? "env-4" : "env-1";
const auth = import.meta.env.DEBUG_GTM_ENV ? "J75EY7yn6iy6dyZOs8awrg" : "EVnxaLdz6hH9pOb_sguE0w";

if(import.meta.env.DEBUG_GTM_ENV) {
	console.info("Google Tag Manager env - debug");
}
else {
	console.info("Google Tag Manager env - live");
}
---
<!-- Google Tag Manager -->
<script define:vars={{ env, auth }}>
// eslint-disable-next-line @typescript-eslint/no-unused-vars
function ActivateTagManager (win, doc, scriptElementName, dataLayerName, gtmId, k) {
	win[dataLayerName] = win[dataLayerName] || [];
	win[dataLayerName].push({
		"gtm.start": new Date().getTime(),
		event: "gtm.js"
	});
	const firstScript = doc.getElementsByTagName(scriptElementName)[0];
	const gtmTag = doc.createElement(scriptElementName);
	gtmTag.async = true;
	gtmTag.src = `https://www.googletagmanager.com/gtm.js?id=${gtmId}&l=${dataLayerName}&gtm_auth=${auth}&gtm_preview=${env}&gtm_cookies_win=x`;
	firstScript.parentNode.insertBefore(gtmTag, firstScript); //Inject GTM as the very first script to be loaded
}

ActivateTagManager(window, document, "script", "dataLayer", "GTM-MB87RDP");
</script>
<!-- End Google Tag Manager -->